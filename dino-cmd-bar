-- Made by dino

local AdminBar = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local CMDBar = Instance.new("TextBox")

local uis = game:GetService("UserInputService")
local ts = game:GetService("TweenService")
local rs = game:GetService("RunService")

local player = game.Players.LocalPlayer

local commands = {}
local prefix = ";"

local clip = false
local god = false

-- Functions

rs.RenderStepped:Connect(function()
	if clip then
		if clip then
			for _, part in pairs(player.Character:GetChildren()) do
				if part:IsA("BasePart") then
					part.CanCollide = false
				end
			end
		end
	end
	
	if god then
		player.Character.Humanoid.Health = 100
	end
end)

function FindPlayer(name)
	local lowername = name:lower()
	
	if lowername == "me" then
		return player
	end
	
	for _, plr in pairs(game.Players:GetPlayers()) do
		if string.match(plr.Name, lowername) or string.match(plr.DisplayName, lowername) then
			return plr
		end
	end
	
	return nil
end

-- Commands

commands.reset = function(...)
	player.Character:BreakJoints()
end

commands.spin = function(args)
	local velocity = Instance.new("BodyAngularVelocity")
	velocity.MaxTorque = Vector3.new(0, 10^5, 0)
	velocity.AngularVelocity = Vector3.new(0, 10^5, 0)
	velocity.Name = "Fling"
	velocity.Parent = player.Character.HumanoidRootPart
end

commands.fling = function(...)
	local velocity = Instance.new("BodyAngularVelocity")
	velocity.MaxTorque = Vector3.new(0, 10^5, 0)
	velocity.AngularVelocity = Vector3.new(0, 10^5, 0)
	velocity.Name = "Fling"
	velocity.Parent = player.Character.HumanoidRootPart
	clip = true
end

commands.noanim = function(...)
	player.Character.Animate.Enabled = false
end

commands.reanim = function(...)
	player.Character.Animate.Enabled = true
end

commands.unfling = function(...)
	if player.Character.HumanoidRootPart:FindFirstChild("Fling") then
		player.Character.HumanoidRootPart.Fling:Destroy()
	end
	
	clip = false
end

commands.unspin = function(...)
	if player.Character.HumanoidRootPart:FindFirstChild("Fling") then
		player.Character.HumanoidRootPart.Fling:Destroy()
	end
end

commands.kill = function(args)
	if args[1] then
		local target = FindPlayer(args[1])
		
		local velocity = Instance.new("BodyAngularVelocity")
		velocity.MaxTorque = Vector3.new(0, 10^5, 0)
		velocity.AngularVelocity = Vector3.new(0, 10^5, 0)
		velocity.Parent = player.Character.HumanoidRootPart
		clip = true

		player.Character.HumanoidRootPart.CFrame = target.Character.HumanoidRootPart.CFrame
	end
end

commands.gotopos = function(args)
	if args[1] and args[2] and args[3] then
		local x = tonumber(args[1])
		local y = tonumber(args[2])
		local z = tonumber(args[3])
		
		player.Character.HumanoidRootPart.CFrame = CFrame.new(x, y, z)
	end
end

commands.tweengoto = function(args)
	if args[1] then
		local target = FindPlayer(args[1])
		
		player.Character.HumanoidRootPart.Anchored = true
		
		local tween = ts:Create(player.Character.HumanoidRootPart, TweenInfo.new(5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, 0, false, 0), { CFrame = target.Character.HumanoidRootPart.CFrame })
		tween:Play()
		tween.Completed:Wait()
		
		player.Character.HumanoidRootPart.Anchored = false
	end
end

commands.god = function(...)
	god = not god
end

commands.ungod = function(...)
	god = false
end

commands.tweengotopos = function(args)
	if args[1] and args[2] and args[3] then
		local x = tonumber(args[1])
		local y = tonumber(args[2])
		local z = tonumber(args[3])
		
		player.Character.HumanoidRootPart.Anchored = true
		
		local tween = ts:Create(player.Character.HumanoidRootPart, TweenInfo.new(5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, 0, false, 0), { CFrame = CFrame.new(x, y, z) })
		tween:Play()
		tween.Completed:Wait()
		
		player.Character.HumanoidRootPart.Anchored = false
	end
end

commands.noclip = function(...)
	clip = not clip
end

commands.clip = function(...)
	clip = false
end

commands.kick = function(args)
	player:Kick(args)
end

commands.btools = function(...)
	loadstring(game:HttpGet("https://cdn.wearedevs.net/scripts/BTools.txt"))()
end

commands.ws = function(args)
    local speed = tonumber(args[1])
    player.Character.Humanoid.WalkSpeed = speed
end

commands.jp = function(args)
    local jump = tonumber(args[1])
    player.Character.Humanoid.JumpPower = jump
end

commands.gotopart = function(args)
	for _, part in pairs(workspace:GetDescendants()) do
		if part.Name == args[1] then
			player.Character.HumanoidRootPart.CFrame = part.CFrame
			break
		end
	end
end

commands.tweengotopart = function(args)
	local p

	for _, part in pairs(workspace:GetDescendants()) do
		if part.Name == args[1] then
			p = part
			break
		end
	end

	player.Character.HumanoidRootPart.Anchored = true
	
	local tween = ts:Create(player.Character.HumanoidRootPart, TweenInfo.new(5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, 0, false, 0), { CFrame = p.CFrame })
	tween:Play()
	tween.Completed:Wait()
	
	player.Character.HumanoidRootPart.Anchored = false
end

-- UI

AdminBar.Name = "AdminBar"
AdminBar.Parent = game.CoreGui

Frame.Parent = AdminBar
Frame.AnchorPoint = Vector2.new(0.5, 0.5)
Frame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Frame.BorderColor3 = Color3.fromRGB(0, 0, 0)
Frame.BorderSizePixel = 0
Frame.Position = UDim2.new(0.5, 0, 2, 0)
Frame.Size = UDim2.new(0, 635, 0, 52)
Frame.Visible = false

UICorner.CornerRadius = UDim.new(0, 20)
UICorner.Parent = Frame

CMDBar.Name = "CMDBar"
CMDBar.Parent = Frame
CMDBar.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
CMDBar.BackgroundTransparency = 1.000
CMDBar.BorderColor3 = Color3.fromRGB(0, 0, 0)
CMDBar.BorderSizePixel = 0
CMDBar.Position = UDim2.new(0.0346456692, 0, 0.0961538479, 0)
CMDBar.Size = UDim2.new(0, 590, 0, 41)
CMDBar.Font = Enum.Font.Nunito
CMDBar.PlaceholderColor3 = Color3.fromRGB(0, 0, 0)
CMDBar.Text = ""
CMDBar.TextColor3 = Color3.fromRGB(0, 0, 0)
CMDBar.TextSize = 32.000
CMDBar.TextXAlignment = Enum.TextXAlignment.Left

uis.InputBegan:Connect(function(k, processed)
	if k.KeyCode == Enum.KeyCode.Semicolon then
		Frame.Visible = true

		local tween = ts:Create(Frame, TweenInfo.new(0.2, Enum.EasingStyle.Linear, Enum.EasingDirection.In, 0, false, 0), { Position = UDim2.new(0.5, 0, 0.909, 0) })
		tween:Play()

		CMDBar:CaptureFocus()
	end
end)

CMDBar.FocusLost:Connect(function(enter)
	if enter then
		local splitstr = CMDBar.Text:split(" ")
		
		local cmd = splitstr[1]:split(prefix)
		local cmdname = cmd[2]
		
		if commands[cmdname] then
			local args = {}
			
			for i = 2, #splitstr do
				table.insert(args, splitstr[i])
			end
			
			commands[cmdname](args)
		end
	end
	
	local tween = ts:Create(Frame, TweenInfo.new(0.2, Enum.EasingStyle.Linear, Enum.EasingDirection.In, 0, false, 0), { Position = UDim2.new(0.5, 0, 2, 0) })
	tween:Play()
	
	tween.Completed:Wait()
	
	Frame.Visible = false
end)
